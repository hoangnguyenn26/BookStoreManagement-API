2025-05-19 00:04:54.514 +07:00 [WRN] (Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware) The WebRootPath was not found: C:\Users\Nguyn\Desktop\Đồ án tốt nghiệp\BookStoreManagement\src\Bookstore.Api\wwwroot. Static files may be unavailable.
2025-05-19 00:04:54.710 +07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: https://localhost:7264
2025-05-19 00:04:54.713 +07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: http://localhost:5244
2025-05-19 00:04:54.833 +07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2025-05-19 00:04:54.836 +07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: Development
2025-05-19 00:04:54.837 +07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: C:\Users\Nguyn\Desktop\Đồ án tốt nghiệp\BookStoreManagement\src\Bookstore.Api
2025-05-19 00:04:58.463 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model) No instantiatable types implementing `IEntityTypeConfiguration` were found while while scanning assembly 'Bookstore.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.
2025-05-19 00:04:58.585 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'CartItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.588 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'InventoryLog'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.591 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.594 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.596 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'StockReceiptDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.598 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Entity 'Book' has a global query filter defined and is the required end of a relationship with the entity 'WishlistItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-19 00:04:58.611 +07:00 [WRN] (Microsoft.EntityFrameworkCore.Model.Validation) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-19 00:04:59.770 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (70ms) [Parameters=[@__email_0='Admin' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CreatedAtUtc], [u1].[Email], [u1].[FirstName], [u1].[IsActive], [u1].[LastName], [u1].[PasswordHash], [u1].[PhoneNumber], [u1].[UpdatedAtUtc], [u1].[UserName], [s].[UserId], [s].[RoleId], [s].[Id], [s].[CreatedAtUtc], [s].[Name], [s].[UpdatedAtUtc]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [r].[Id], [r].[CreatedAtUtc], [r].[Name], [r].[UpdatedAtUtc]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [s] ON [u1].[Id] = [s].[UserId]
ORDER BY [u1].[Id], [s].[UserId], [s].[RoleId]
2025-05-19 00:04:59.826 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (11ms) [Parameters=[@__username_0='Admin' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CreatedAtUtc], [u1].[Email], [u1].[FirstName], [u1].[IsActive], [u1].[LastName], [u1].[PasswordHash], [u1].[PhoneNumber], [u1].[UpdatedAtUtc], [u1].[UserName], [s].[UserId], [s].[RoleId], [s].[Id], [s].[CreatedAtUtc], [s].[Name], [s].[UpdatedAtUtc]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[UserName] = @__username_0
) AS [u1]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [r].[Id], [r].[CreatedAtUtc], [r].[Name], [r].[UpdatedAtUtc]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [s] ON [u1].[Id] = [s].[UserId]
ORDER BY [u1].[Id], [s].[UserId], [s].[RoleId]
2025-05-19 00:05:00.449 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__userId_0='f54527eb-f806-40db-bf76-c7b0e5fa6d39'], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-05-19 00:05:00.636 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetching home dashboard data.
2025-05-19 00:05:00.728 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit)
ORDER BY [b].[CreatedAtUtc] DESC
2025-05-19 00:05:00.744 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetched 10 newest books.
2025-05-19 00:05:00.856 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (13ms) [Parameters=[@__p_2='5', @__inclusiveStartDate_0='2025-04-18T00:00:00.0000000Z', @__inclusiveEndDate_1='2025-05-19T00:00:00.0000000Z'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[BookId], [b2].[Title] AS [BookTitle], [s].[TotalQuantitySold]
FROM (
    SELECT TOP(@__p_2) [o].[BookId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantitySold]
    FROM [OrderDetails] AS [o]
    INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
    INNER JOIN (
        SELECT [b].[Id], [b].[IsDeleted]
        FROM [Books] AS [b]
        WHERE [b].[IsDeleted] = CAST(0 AS bit)
    ) AS [b0] ON [o].[BookId] = [b0].[Id]
    WHERE [o0].[Status] = CAST(3 AS tinyint) AND [o0].[OrderDate] >= @__inclusiveStartDate_0 AND [o0].[OrderDate] < @__inclusiveEndDate_1 AND [b0].[IsDeleted] = CAST(0 AS bit)
    GROUP BY [o].[BookId]
    ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
) AS [s]
INNER JOIN (
    SELECT [b1].[Id], [b1].[Title]
    FROM [Books] AS [b1]
    WHERE [b1].[IsDeleted] = CAST(0 AS bit)
) AS [b2] ON [s].[BookId] = [b2].[Id]
ORDER BY [s].[TotalQuantitySold] DESC
2025-05-19 00:05:00.917 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (8ms) [Parameters=[@__bestsellerBookIds_0='["ba80e2b5-b426-44eb-acfa-06315f9fcb6b","c191919e-e763-4e03-9e2b-24d944f4d401","39f2e54f-3480-424d-9611-a9b9097314a9","6c50f852-d8c7-4ef9-a26a-c9d292ef9108","6d858026-d70a-4441-8837-01f8d972cb26"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit) AND [b].[Id] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__bestsellerBookIds_0) WITH ([value] uniqueidentifier '$') AS [b0]
) AND [b].[IsDeleted] = CAST(0 AS bit)
2025-05-19 00:05:00.929 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetched 5 bestselling books.
2025-05-19 00:05:00.946 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (6ms) [Parameters=[@__currentDate_0='2025-05-18T17:05:00.9308350Z', @__currentDate_1='2025-05-18T17:05:00.9308350Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[CreatedAtUtc], [p].[CurrentUsage], [p].[Description], [p].[DiscountAmount], [p].[DiscountPercentage], [p].[EndDate], [p].[IsActive], [p].[MaxUsage], [p].[StartDate], [p].[UpdatedAtUtc]
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDate_0 AND ([p].[EndDate] IS NULL OR [p].[EndDate] >= @__currentDate_1) AND ([p].[MaxUsage] IS NULL OR [p].[CurrentUsage] < [p].[MaxUsage])
ORDER BY [p].[EndDate]
2025-05-19 00:05:00.964 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAtUtc], [c].[Description], [c].[IsDeleted], [c].[Name], [c].[ParentCategoryId], [c].[UpdatedAtUtc]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[ParentCategoryId] IS NULL AND [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
2025-05-19 00:05:00.970 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Successfully fetched home dashboard data.
2025-05-19 00:05:04.041 +07:00 [INF] (Bookstore.Application.Services.UserService) Fetching all users for admin. RoleFilter: All, StatusFilter: All, Page: 1, PageSize: 20
2025-05-19 00:05:04.079 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (9ms) [Parameters=[@__p_0='0', @__p_1='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CreatedAtUtc], [u1].[Email], [u1].[FirstName], [u1].[IsActive], [u1].[LastName], [u1].[PasswordHash], [u1].[PhoneNumber], [u1].[UpdatedAtUtc], [u1].[UserName], [s].[UserId], [s].[RoleId], [s].[Id], [s].[CreatedAtUtc], [s].[Name], [s].[UpdatedAtUtc]
FROM (
    SELECT [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
    FROM [Users] AS [u]
    ORDER BY [u].[UserName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u1]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [r].[Id], [r].[CreatedAtUtc], [r].[Name], [r].[UpdatedAtUtc]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [s] ON [u1].[Id] = [s].[UserId]
ORDER BY [u1].[UserName], [u1].[Id], [s].[UserId], [s].[RoleId]
2025-05-19 00:05:14.829 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-19T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:05:14.855 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (9ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:05:14.886 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:05:22.408 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-19T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:05:22.416 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:05:22.426 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:05:27.387 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-19T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:05:27.393 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:05:27.402 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:05:51.706 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating bestsellers report from "2025-05-13T00:00:00.0000000" to "2025-05-19T00:00:00.0000000", top 7
2025-05-19 00:05:51.707 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating low stock report with threshold 5
2025-05-19 00:05:51.707 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating revenue report from "2025-05-13T00:00:00.0000000" to "2025-05-19T00:00:00.0000000"
2025-05-19 00:05:51.724 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (13ms) [Parameters=[@__p_2='7', @__inclusiveStartDate_0='2025-05-13T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[BookId], [b2].[Title] AS [BookTitle], [s].[TotalQuantitySold]
FROM (
    SELECT TOP(@__p_2) [o].[BookId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantitySold]
    FROM [OrderDetails] AS [o]
    INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
    INNER JOIN (
        SELECT [b].[Id], [b].[IsDeleted]
        FROM [Books] AS [b]
        WHERE [b].[IsDeleted] = CAST(0 AS bit)
    ) AS [b0] ON [o].[BookId] = [b0].[Id]
    WHERE [o0].[Status] = CAST(3 AS tinyint) AND [o0].[OrderDate] >= @__inclusiveStartDate_0 AND [o0].[OrderDate] < @__inclusiveEndDate_1 AND [b0].[IsDeleted] = CAST(0 AS bit)
    GROUP BY [o].[BookId]
    ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
) AS [s]
INNER JOIN (
    SELECT [b1].[Id], [b1].[Title]
    FROM [Books] AS [b1]
    WHERE [b1].[IsDeleted] = CAST(0 AS bit)
) AS [b2] ON [s].[BookId] = [b2].[Id]
ORDER BY [s].[TotalQuantitySold] DESC
2025-05-19 00:05:51.763 +07:00 [INF] (Bookstore.Application.Services.ReportService) Bestsellers report generated successfully.
2025-05-19 00:05:51.763 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (34ms) [Parameters=[@__lowStockThreshold_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit) AND [b].[StockQuantity] > 0 AND [b].[StockQuantity] <= @__lowStockThreshold_0
ORDER BY [b].[StockQuantity]
2025-05-19 00:05:51.768 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__inclusiveStartDate_0='2025-05-13T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAtUtc], [o].[DeliveryMethod], [o].[InvoiceNumber], [o].[OrderDate], [o].[OrderShippingAddressId], [o].[OrderType], [o].[PaymentMethod], [o].[PaymentStatus], [o].[Status], [o].[TotalAmount], [o].[TransactionId], [o].[UpdatedAtUtc], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = CAST(3 AS tinyint) AND [o].[OrderDate] >= @__inclusiveStartDate_0 AND [o].[OrderDate] < @__inclusiveEndDate_1
2025-05-19 00:05:51.786 +07:00 [INF] (Bookstore.Application.Services.ReportService) Revenue report generated successfully.
2025-05-19 00:06:05.346 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[@__email_0='Admin' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CreatedAtUtc], [u1].[Email], [u1].[FirstName], [u1].[IsActive], [u1].[LastName], [u1].[PasswordHash], [u1].[PhoneNumber], [u1].[UpdatedAtUtc], [u1].[UserName], [s].[UserId], [s].[RoleId], [s].[Id], [s].[CreatedAtUtc], [s].[Name], [s].[UpdatedAtUtc]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [r].[Id], [r].[CreatedAtUtc], [r].[Name], [r].[UpdatedAtUtc]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [s] ON [u1].[Id] = [s].[UserId]
ORDER BY [u1].[Id], [s].[UserId], [s].[RoleId]
2025-05-19 00:06:05.359 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__username_0='Admin' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CreatedAtUtc], [u1].[Email], [u1].[FirstName], [u1].[IsActive], [u1].[LastName], [u1].[PasswordHash], [u1].[PhoneNumber], [u1].[UpdatedAtUtc], [u1].[UserName], [s].[UserId], [s].[RoleId], [s].[Id], [s].[CreatedAtUtc], [s].[Name], [s].[UpdatedAtUtc]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[UserName] = @__username_0
) AS [u1]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [r].[Id], [r].[CreatedAtUtc], [r].[Name], [r].[UpdatedAtUtc]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [s] ON [u1].[Id] = [s].[UserId]
ORDER BY [u1].[Id], [s].[UserId], [s].[RoleId]
2025-05-19 00:06:05.731 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__userId_0='f54527eb-f806-40db-bf76-c7b0e5fa6d39'], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-05-19 00:06:05.817 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetching home dashboard data.
2025-05-19 00:06:05.827 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit)
ORDER BY [b].[CreatedAtUtc] DESC
2025-05-19 00:06:05.830 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetched 10 newest books.
2025-05-19 00:06:05.842 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (10ms) [Parameters=[@__p_2='5', @__inclusiveStartDate_0='2025-04-18T00:00:00.0000000Z', @__inclusiveEndDate_1='2025-05-19T00:00:00.0000000Z'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[BookId], [b2].[Title] AS [BookTitle], [s].[TotalQuantitySold]
FROM (
    SELECT TOP(@__p_2) [o].[BookId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantitySold]
    FROM [OrderDetails] AS [o]
    INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
    INNER JOIN (
        SELECT [b].[Id], [b].[IsDeleted]
        FROM [Books] AS [b]
        WHERE [b].[IsDeleted] = CAST(0 AS bit)
    ) AS [b0] ON [o].[BookId] = [b0].[Id]
    WHERE [o0].[Status] = CAST(3 AS tinyint) AND [o0].[OrderDate] >= @__inclusiveStartDate_0 AND [o0].[OrderDate] < @__inclusiveEndDate_1 AND [b0].[IsDeleted] = CAST(0 AS bit)
    GROUP BY [o].[BookId]
    ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
) AS [s]
INNER JOIN (
    SELECT [b1].[Id], [b1].[Title]
    FROM [Books] AS [b1]
    WHERE [b1].[IsDeleted] = CAST(0 AS bit)
) AS [b2] ON [s].[BookId] = [b2].[Id]
ORDER BY [s].[TotalQuantitySold] DESC
2025-05-19 00:06:05.858 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (9ms) [Parameters=[@__bestsellerBookIds_0='["ba80e2b5-b426-44eb-acfa-06315f9fcb6b","c191919e-e763-4e03-9e2b-24d944f4d401","39f2e54f-3480-424d-9611-a9b9097314a9","6c50f852-d8c7-4ef9-a26a-c9d292ef9108","6d858026-d70a-4441-8837-01f8d972cb26"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit) AND [b].[Id] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__bestsellerBookIds_0) WITH ([value] uniqueidentifier '$') AS [b0]
) AND [b].[IsDeleted] = CAST(0 AS bit)
2025-05-19 00:06:05.863 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Fetched 5 bestselling books.
2025-05-19 00:06:05.874 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (9ms) [Parameters=[@__currentDate_0='2025-05-18T17:06:05.8648038Z', @__currentDate_1='2025-05-18T17:06:05.8648038Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[CreatedAtUtc], [p].[CurrentUsage], [p].[Description], [p].[DiscountAmount], [p].[DiscountPercentage], [p].[EndDate], [p].[IsActive], [p].[MaxUsage], [p].[StartDate], [p].[UpdatedAtUtc]
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDate_0 AND ([p].[EndDate] IS NULL OR [p].[EndDate] >= @__currentDate_1) AND ([p].[MaxUsage] IS NULL OR [p].[CurrentUsage] < [p].[MaxUsage])
ORDER BY [p].[EndDate]
2025-05-19 00:06:05.883 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAtUtc], [c].[Description], [c].[IsDeleted], [c].[Name], [c].[ParentCategoryId], [c].[UpdatedAtUtc]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[ParentCategoryId] IS NULL AND [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
2025-05-19 00:06:05.886 +07:00 [INF] (Bookstore.Application.Services.DashboardService) Successfully fetched home dashboard data.
2025-05-19 00:06:11.811 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-19T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:11.818 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:06:11.831 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:18.707 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-18T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:18.712 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__inclusiveStartDate_0='2025-04-18T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:06:18.722 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (6ms) [Parameters=[@__inclusiveStartDate_0='2025-04-18T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:22.995 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-05-18T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:23.001 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__inclusiveStartDate_0='2025-05-18T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:06:23.010 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__inclusiveStartDate_0='2025-05-18T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:26.638 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:26.644 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__inclusiveStartDate_0='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:06:26.653 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (6ms) [Parameters=[@__inclusiveStartDate_0='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:48.251 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: "Adjustment", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:48.263 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__reason_Value_0='5' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
2025-05-19 00:06:48.281 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__reason_Value_0='5' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000', @__p_3='0', @__p_4='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:57.171 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: "Return", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:57.178 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__reason_Value_0='4' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
2025-05-19 00:06:57.189 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__reason_Value_0='4' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000', @__p_3='0', @__p_4='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:06:59.906 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: "OrderCancellation", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:06:59.913 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__reason_Value_0='3' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
2025-05-19 00:06:59.921 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (5ms) [Parameters=[@__reason_Value_0='3' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000', @__p_3='0', @__p_4='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:07:01.463 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: "OnlineSale", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:07:01.471 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__reason_Value_0='1' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
2025-05-19 00:07:01.479 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__reason_Value_0='1' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000', @__p_3='0', @__p_4='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:07:30.669 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: "OnlineSale", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:07:30.680 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (7ms) [Parameters=[@__reason_Value_0='1' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
2025-05-19 00:07:30.689 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (6ms) [Parameters=[@__reason_Value_0='1' (Size = 1), @__inclusiveStartDate_1='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_2='2025-05-20T00:00:00.0000000', @__p_3='0', @__p_4='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[Reason] = @__reason_Value_0 AND [i].[TimestampUtc] >= @__inclusiveStartDate_1 AND [i].[TimestampUtc] < @__inclusiveEndDate_2
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:07:33.540 +07:00 [WRN] (Bookstore.Infrastructure.Services.GoogleCloudStorageService) DEBUG: GOOGLE_APPLICATION_CREDENTIALS value read: 'D:\imagekey\imagestorage-458109-d1f00cf95c5c.json'
2025-05-19 00:07:33.542 +07:00 [WRN] (Bookstore.Infrastructure.Services.GoogleCloudStorageService) DEBUG: Checking if file exists at path: 'true'
2025-05-19 00:07:33.544 +07:00 [WRN] (Bookstore.Infrastructure.Services.GoogleCloudStorageService) DEBUG: Parsed Path as URI successfully: D:\imagekey\imagestorage-458109-d1f00cf95c5c.json
2025-05-19 00:07:33.557 +07:00 [WRN] (Bookstore.Infrastructure.Services.GoogleCloudStorageService) DEBUG: Successfully read content from credential file.
2025-05-19 00:07:34.118 +07:00 [INF] (Bookstore.Infrastructure.Services.GoogleCloudStorageService) Google Cloud Storage client created successfully using Application Default Credentials or Environment Variable.
2025-05-19 00:07:34.156 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (14ms) [Parameters=[@__searchTerm_0_contains='%dang%' (Size = 4000), @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AuthorId], [s].[CategoryId], [s].[CoverImageUrl], [s].[CreatedAtUtc], [s].[Description], [s].[ISBN], [s].[IsDeleted], [s].[Price], [s].[PublicationYear], [s].[Publisher], [s].[StockQuantity], [s].[Title], [s].[UpdatedAtUtc], [s].[Id0], [s].[Biography], [s].[CreatedAtUtc0], [s].[Name], [s].[UpdatedAtUtc0], [c0].[Id], [c0].[CreatedAtUtc], [c0].[Description], [c0].[IsDeleted], [c0].[Name], [c0].[ParentCategoryId], [c0].[UpdatedAtUtc]
FROM (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id] AS [Id0], [a].[Biography], [a].[CreatedAtUtc] AS [CreatedAtUtc0], [a].[Name], [a].[UpdatedAtUtc] AS [UpdatedAtUtc0]
    FROM [Books] AS [b]
    LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
    WHERE [b].[IsDeleted] = CAST(0 AS bit) AND (LOWER([b].[Title]) LIKE @__searchTerm_0_contains ESCAPE N'\' OR ([a].[Id] IS NOT NULL AND [a].[Name] IS NOT NULL AND LOWER([a].[Name]) LIKE @__searchTerm_0_contains ESCAPE N'\') OR ([b].[ISBN] IS NOT NULL AND LOWER([b].[ISBN]) LIKE @__searchTerm_0_contains ESCAPE N'\'))
    ORDER BY [b].[CreatedAtUtc] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN (
    SELECT [c].[Id], [c].[CreatedAtUtc], [c].[Description], [c].[IsDeleted], [c].[Name], [c].[ParentCategoryId], [c].[UpdatedAtUtc]
    FROM [Categories] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [c0] ON [s].[CategoryId] = [c0].[Id]
ORDER BY [s].[CreatedAtUtc] DESC
2025-05-19 00:07:37.603 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (11ms) [Parameters=[@__searchTerm_0_contains='%dang%' (Size = 4000), @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AuthorId], [s].[CategoryId], [s].[CoverImageUrl], [s].[CreatedAtUtc], [s].[Description], [s].[ISBN], [s].[IsDeleted], [s].[Price], [s].[PublicationYear], [s].[Publisher], [s].[StockQuantity], [s].[Title], [s].[UpdatedAtUtc], [s].[Id0], [s].[Biography], [s].[CreatedAtUtc0], [s].[Name], [s].[UpdatedAtUtc0], [c0].[Id], [c0].[CreatedAtUtc], [c0].[Description], [c0].[IsDeleted], [c0].[Name], [c0].[ParentCategoryId], [c0].[UpdatedAtUtc]
FROM (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id] AS [Id0], [a].[Biography], [a].[CreatedAtUtc] AS [CreatedAtUtc0], [a].[Name], [a].[UpdatedAtUtc] AS [UpdatedAtUtc0]
    FROM [Books] AS [b]
    LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
    WHERE [b].[IsDeleted] = CAST(0 AS bit) AND (LOWER([b].[Title]) LIKE @__searchTerm_0_contains ESCAPE N'\' OR ([a].[Id] IS NOT NULL AND [a].[Name] IS NOT NULL AND LOWER([a].[Name]) LIKE @__searchTerm_0_contains ESCAPE N'\') OR ([b].[ISBN] IS NOT NULL AND LOWER([b].[ISBN]) LIKE @__searchTerm_0_contains ESCAPE N'\'))
    ORDER BY [b].[CreatedAtUtc] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN (
    SELECT [c].[Id], [c].[CreatedAtUtc], [c].[Description], [c].[IsDeleted], [c].[Name], [c].[ParentCategoryId], [c].[UpdatedAtUtc]
    FROM [Categories] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [c0] ON [s].[CategoryId] = [c0].[Id]
ORDER BY [s].[CreatedAtUtc] DESC
2025-05-19 00:07:39.559 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: "6d858026-d70a-4441-8837-01f8d972cb26", Reason: "OnlineSale", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:07:39.573 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (8ms) [Parameters=[@__bookId_Value_0='6d858026-d70a-4441-8837-01f8d972cb26', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
2025-05-19 00:07:39.592 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (8ms) [Parameters=[@__bookId_Value_0='6d858026-d70a-4441-8837-01f8d972cb26', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000', @__p_4='0', @__p_5='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:07:47.482 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (14ms) [Parameters=[@__searchTerm_0_contains='%code%' (Size = 4000), @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AuthorId], [s].[CategoryId], [s].[CoverImageUrl], [s].[CreatedAtUtc], [s].[Description], [s].[ISBN], [s].[IsDeleted], [s].[Price], [s].[PublicationYear], [s].[Publisher], [s].[StockQuantity], [s].[Title], [s].[UpdatedAtUtc], [s].[Id0], [s].[Biography], [s].[CreatedAtUtc0], [s].[Name], [s].[UpdatedAtUtc0], [c0].[Id], [c0].[CreatedAtUtc], [c0].[Description], [c0].[IsDeleted], [c0].[Name], [c0].[ParentCategoryId], [c0].[UpdatedAtUtc]
FROM (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id] AS [Id0], [a].[Biography], [a].[CreatedAtUtc] AS [CreatedAtUtc0], [a].[Name], [a].[UpdatedAtUtc] AS [UpdatedAtUtc0]
    FROM [Books] AS [b]
    LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
    WHERE [b].[IsDeleted] = CAST(0 AS bit) AND (LOWER([b].[Title]) LIKE @__searchTerm_0_contains ESCAPE N'\' OR ([a].[Id] IS NOT NULL AND [a].[Name] IS NOT NULL AND LOWER([a].[Name]) LIKE @__searchTerm_0_contains ESCAPE N'\') OR ([b].[ISBN] IS NOT NULL AND LOWER([b].[ISBN]) LIKE @__searchTerm_0_contains ESCAPE N'\'))
    ORDER BY [b].[CreatedAtUtc] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN (
    SELECT [c].[Id], [c].[CreatedAtUtc], [c].[Description], [c].[IsDeleted], [c].[Name], [c].[ParentCategoryId], [c].[UpdatedAtUtc]
    FROM [Categories] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [c0] ON [s].[CategoryId] = [c0].[Id]
ORDER BY [s].[CreatedAtUtc] DESC
2025-05-19 00:07:49.250 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: "c191919e-e763-4e03-9e2b-24d944f4d401", Reason: "OnlineSale", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:07:49.256 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[@__bookId_Value_0='c191919e-e763-4e03-9e2b-24d944f4d401', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
2025-05-19 00:07:49.266 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__bookId_Value_0='c191919e-e763-4e03-9e2b-24d944f4d401', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000', @__p_4='0', @__p_5='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:08:10.207 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: "c191919e-e763-4e03-9e2b-24d944f4d401", Reason: "OnlineSale", Start: "2025-05-10T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:08:10.213 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__bookId_Value_0='c191919e-e763-4e03-9e2b-24d944f4d401', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
2025-05-19 00:08:10.223 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (6ms) [Parameters=[@__bookId_Value_0='c191919e-e763-4e03-9e2b-24d944f4d401', @__reason_Value_1='1' (Size = 1), @__inclusiveStartDate_2='2025-05-10T00:00:00.0000000', @__inclusiveEndDate_3='2025-05-20T00:00:00.0000000', @__p_4='0', @__p_5='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[BookId] = @__bookId_Value_0 AND [i].[Reason] = @__reason_Value_1 AND [i].[TimestampUtc] >= @__inclusiveStartDate_2 AND [i].[TimestampUtc] < @__inclusiveEndDate_3
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:08:13.232 +07:00 [INF] (Bookstore.Application.Services.InventoryService) Fetching inventory history. BookId: null, Reason: null, Start: "2025-04-19T00:00:00.0000000", End: "2025-05-19T00:00:00.0000000", User: null, Page: 1
2025-05-19 00:08:13.238 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (2ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [InventoryLogs] AS [i]
WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
2025-05-19 00:08:13.245 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (4ms) [Parameters=[@__inclusiveStartDate_0='2025-04-19T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000', @__p_2='0', @__p_3='20'], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[BookId], [i0].[ChangeQuantity], [i0].[OrderId], [i0].[Reason], [i0].[StockReceiptId], [i0].[TimestampUtc], [i0].[UserId], [b0].[Id], [b0].[AuthorId], [b0].[CategoryId], [b0].[CoverImageUrl], [b0].[CreatedAtUtc], [b0].[Description], [b0].[ISBN], [b0].[IsDeleted], [b0].[Price], [b0].[PublicationYear], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAtUtc], [u].[Id], [u].[CreatedAtUtc], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[UpdatedAtUtc], [u].[UserName]
FROM (
    SELECT [i].[Id], [i].[BookId], [i].[ChangeQuantity], [i].[OrderId], [i].[Reason], [i].[StockReceiptId], [i].[TimestampUtc], [i].[UserId]
    FROM [InventoryLogs] AS [i]
    WHERE [i].[TimestampUtc] >= @__inclusiveStartDate_0 AND [i].[TimestampUtc] < @__inclusiveEndDate_1
    ORDER BY [i].[TimestampUtc] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [i0]
INNER JOIN (
    SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc]
    FROM [Books] AS [b]
    WHERE [b].[IsDeleted] = CAST(0 AS bit)
) AS [b0] ON [i0].[BookId] = [b0].[Id]
LEFT JOIN [Users] AS [u] ON [i0].[UserId] = [u].[Id]
ORDER BY [i0].[TimestampUtc] DESC
2025-05-19 00:10:37.346 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating low stock report with threshold 5
2025-05-19 00:10:37.347 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating revenue report from "2025-05-13T00:00:00.0000000" to "2025-05-19T00:00:00.0000000"
2025-05-19 00:10:37.347 +07:00 [INF] (Bookstore.Application.Services.ReportService) Generating bestsellers report from "2025-05-13T00:00:00.0000000" to "2025-05-19T00:00:00.0000000", top 7
2025-05-19 00:10:37.371 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (20ms) [Parameters=[@__inclusiveStartDate_0='2025-05-13T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAtUtc], [o].[DeliveryMethod], [o].[InvoiceNumber], [o].[OrderDate], [o].[OrderShippingAddressId], [o].[OrderType], [o].[PaymentMethod], [o].[PaymentStatus], [o].[Status], [o].[TotalAmount], [o].[TransactionId], [o].[UpdatedAtUtc], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = CAST(3 AS tinyint) AND [o].[OrderDate] >= @__inclusiveStartDate_0 AND [o].[OrderDate] < @__inclusiveEndDate_1
2025-05-19 00:10:37.372 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (23ms) [Parameters=[@__lowStockThreshold_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[CategoryId], [b].[CoverImageUrl], [b].[CreatedAtUtc], [b].[Description], [b].[ISBN], [b].[IsDeleted], [b].[Price], [b].[PublicationYear], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAtUtc], [a].[Id], [a].[Biography], [a].[CreatedAtUtc], [a].[Name], [a].[UpdatedAtUtc]
FROM [Books] AS [b]
LEFT JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
WHERE [b].[IsDeleted] = CAST(0 AS bit) AND [b].[StockQuantity] > 0 AND [b].[StockQuantity] <= @__lowStockThreshold_0
ORDER BY [b].[StockQuantity]
2025-05-19 00:10:37.373 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (20ms) [Parameters=[@__p_2='7', @__inclusiveStartDate_0='2025-05-13T00:00:00.0000000', @__inclusiveEndDate_1='2025-05-20T00:00:00.0000000'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[BookId], [b2].[Title] AS [BookTitle], [s].[TotalQuantitySold]
FROM (
    SELECT TOP(@__p_2) [o].[BookId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantitySold]
    FROM [OrderDetails] AS [o]
    INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
    INNER JOIN (
        SELECT [b].[Id], [b].[IsDeleted]
        FROM [Books] AS [b]
        WHERE [b].[IsDeleted] = CAST(0 AS bit)
    ) AS [b0] ON [o].[BookId] = [b0].[Id]
    WHERE [o0].[Status] = CAST(3 AS tinyint) AND [o0].[OrderDate] >= @__inclusiveStartDate_0 AND [o0].[OrderDate] < @__inclusiveEndDate_1 AND [b0].[IsDeleted] = CAST(0 AS bit)
    GROUP BY [o].[BookId]
    ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
) AS [s]
INNER JOIN (
    SELECT [b1].[Id], [b1].[Title]
    FROM [Books] AS [b1]
    WHERE [b1].[IsDeleted] = CAST(0 AS bit)
) AS [b2] ON [s].[BookId] = [b2].[Id]
ORDER BY [s].[TotalQuantitySold] DESC
2025-05-19 00:10:37.375 +07:00 [INF] (Bookstore.Application.Services.ReportService) Revenue report generated successfully.
2025-05-19 00:10:37.384 +07:00 [INF] (Bookstore.Application.Services.ReportService) Bestsellers report generated successfully.
2025-05-19 00:10:47.286 +07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[CreatedAtUtc], [p].[CurrentUsage], [p].[Description], [p].[DiscountAmount], [p].[DiscountPercentage], [p].[EndDate], [p].[IsActive], [p].[MaxUsage], [p].[StartDate], [p].[UpdatedAtUtc]
FROM [Promotions] AS [p]
ORDER BY [p].[CreatedAtUtc] DESC
